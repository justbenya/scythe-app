{"version":3,"sources":["components/ButtonInstallPWA.tsx","history.ts","common/utils.ts","features/players/playersSlice.ts","common/scytheLogic.ts","img/bg.jpg","pages/First.tsx","components/FactionIcon.tsx","components/FactionIconWithBadge.tsx","components/TabPanel.tsx","components/FullWidthTabs.tsx","components/FactionCharacterImage.tsx","features/players/selectors.ts","features/names/namesSlice.ts","features/names/selectors.ts","features/names/AutocompletePlayerName.tsx","features/players/PlayerCard.tsx","pages/Home.tsx","pages/Result.tsx","features/players/ScoreForm.tsx","pages/Score.tsx","routes.ts","pages/Settings.tsx","components/AppMenuNavigation.tsx","components/MainLayout.tsx","pages/NotFound.tsx","app/App.tsx","app/rootReducer.ts","app/store.ts","serviceWorkerRegistration.ts","index.tsx"],"names":["deferredPrompt","createHistory","basename","ButtonInstallPWA","useState","installable","setInstallable","useEffect","window","addEventListener","e","preventDefault","Button","onClick","prompt","userChoice","then","choiceResult","outcome","console","log","shuffle","array","result","i","length","randIndex","Math","floor","random","temp","clearPath","path","replace","playersSlice","createSlice","name","initialState","reducers","createPlayer","reducer","state","action","Object","values","TOTAL_PLAYERS","usedFaction","map","faction","usedMats","mat","randomFactions","factions","filter","includes","randomMats","mats","player","id","payload","gold","popularity","stars","territories","resources","buildingBonuses","points","prepare","nanoid","editPlayer","removePlayer","omit","deletePlayers","actions","changeFieldInPlayer","field","newValue","playerId","dispatch","getState","players","prevValue","isValueAlreadySelected","find","changesPlayers","changeFactionPlayer","scoreFormSubmit","formData","nextPlayer","calculatePoints","every","history","push","routes","score","findEngNameFactionToUrl","addPlayer","a","getRouteLastAddedPlayer","index","useStyles","makeStyles","container","height","paddingBottom","paperContainer","backgroundColor","backgroundImage","Image","backgroundPosition","backgroundSize","logo","marginTop","width","title","paddingTop","fontWeight","color","fontSize","textShadow","btnAddPlayer","First","useDispatch","classes","Paper","className","elevation","square","variant","Container","fixed","Grid","direction","justify","alignItems","spacing","item","Typography","align","fullWidth","FactionIcon","props","iconPath","src","alt","FactionIconWithBadge","Badge","invisible","overlap","badgeContent","style","green","getIconPath","root","margin","maxWidth","TabPanel","children","value","other","role","hidden","aria-labelledby","Box","p","theme","palette","background","paper","default","tab","padding","textTransform","opacity","minHeight","text","primary","swipeableViews","FullWidthTabs","useTheme","useParams","React","foundPlayerIndexByFaction","setValue","useHistory","factionUrl","useRouteMatch","scoreUrl","url","getLabel","shortName","AppBar","position","Toolbar","Tabs","onChange","event","scrollButtons","indicatorColor","Tab","component","Link","clsx","label","icon","to","threshold","hysteresis","resistance","axis","onChangeIndex","dir","media","objectPosition","FactionCharacterImage","characterPath","CardMedia","image","getPlayers","getPlayerWhoHasFirstTurn","createSelector","playerFirstTurn","getPlayersSortByFirstTurn","playerFirstTurnIndex","factionsMoveOrder","indexOf","turnOrder","reversedMoveOrder","_","nth","it","fistElement","slice","reverse","getPlayerByFaction","namesSlice","addName","deleteName","changeName","obj","getNames","names","createFilterOptions","AutocompletePlayerName","useSelector","createName","Autocomplete","inputValue","filterOptions","options","params","filtered","isNameNotEmpty","isNameUnique","isNameExist","findIndex","selectOnFocus","clearOnBlur","handleHomeEndKeys","getOptionLabel","option","renderOption","display","justifyContent","IconButton","aria-label","stopPropagation","handleDeleteName","freeSolo","renderInput","TextField","size","createStyles","expand","transform","marginLeft","transition","transitions","create","duration","shortest","cardActions","cardContent","expandOpen","matImage","PlayerCard","expanded","setExpanded","Card","CardContent","xs","sm","select","SelectProps","renderValue","target","MenuItem","CardActions","disableSpacing","aria-expanded","Collapse","in","timeout","unmountOnExit","imgPath","Home","searchWord","findPlayerByFaction","disabled","borderCollapse","minWidth","sticky","left","zIndex","resourceIcon","verticalAlign","connect","playersByWinningPosition","sort","b","gameEndPosition","converted","mapKeys","TableContainer","Table","TableHead","TableRow","TableCell","resource","TableBody","scope","getShortNameFaction","forEach","setTimeout","max","schema","yup","shape","required","min","integer","typeError","ScoreForm","currentIndex","last","first","prevPlayer","foundPrevNextPlayers","useForm","defaultValues","mode","resolver","yupResolver","register","handleSubmit","errors","reset","undefined","handleOnFocus","onSubmit","autoComplete","error","helperText","message","inputRef","type","onFocus","InputProps","startAdornment","InputAdornment","Score","exact","Result","NotFound","rel","href","slug","process","dictionaryByFactionNames","keyBy","getLastAddedFaction","lastAddedPlayer","homePage","searchFaction","AppMenuNavigation","BottomNavigation","location","pathname","showLabels","BottomNavigationAction","main","MainLayout","orientation","useOrientationChange","createMuiTheme","secondary","red","light","dark","contrastText","A400","App","ThemeProvider","CssBaseline","route","rootReducer","combineReducers","persistConfig","key","version","storage","persistedReducer","persistReducer","store","configureStore","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","persistor","persistStore","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","render","loading","StylesProvider","injectFirst","document","getElementById","URL","origin","fetch","headers","response","contentType","get","status","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.9272fe8d.chunk.js","sourcesContent":["import Button from '@material-ui/core/Button';\nimport React, { useEffect, useState } from 'react';\n\nlet deferredPrompt: any;\n\nexport const ButtonInstallPWA = () => {\n    const [installable, setInstallable] = useState(false);\n\n    useEffect(() => {\n        window.addEventListener('beforeinstallprompt', (e: Event) => {\n            // Prevent the mini-infobar from appearing on mobile\n            e.preventDefault();\n            // Stash the event so it can be triggered later.\n            deferredPrompt = e;\n            // Update UI notify the user they can install the PWA\n            setInstallable(true);\n        });\n    }, []);\n\n\n    const handleInstallClick = () => {\n        // Hide the app provided install promotion\n        setInstallable(false);\n        // Show the install prompt\n        deferredPrompt.prompt();\n        // Wait for the user to respond to the prompt\n        deferredPrompt.userChoice.then((choiceResult: any) => {\n            if (choiceResult.outcome === 'accepted') {\n                console.log('User accepted the install prompt');\n            } else {\n                console.log('User dismissed the install prompt');\n            }\n        });\n    };\n\n\n    return (\n        <div>\n            { installable && <Button onClick={ handleInstallClick }>Установить</Button> }\n        </div>\n    );\n};\n\n","import { createHashHistory as createHistory } from 'history'\r\n\r\nexport default createHistory({\r\n    basename: '/'\r\n});\r\n","export function shuffle(array: any): Array<any> {\r\n    const result = [...array];\r\n    for (let i = result.length - 1; i > 0; i--) {\r\n        let randIndex = Math.floor(Math.random() * (i + 1));\r\n        let temp = result[i];\r\n        result[i] = result[randIndex];\r\n        result[randIndex] = temp;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function isEmpty(obj: object | null) {\r\n    return obj === null ? true : Object.keys(obj).length === 0;\r\n}\r\n\r\nexport function clearPath(path: string): string {\r\n    const firstVariant = path.replace(':id?/', '');\r\n    return firstVariant.replace(':id', '');\r\n}\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport omit from 'lodash-es/omit';\r\nimport { nanoid } from 'nanoid';\r\nimport { AppThunk } from '../../app/store';\r\nimport {\r\n    calculatePoints,\r\n    factions,\r\n    findEngNameFactionToUrl,\r\n    getRouteLastAddedPlayer,\r\n    mats,\r\n    TOTAL_PLAYERS,\r\n} from '../../common/scytheLogic';\r\nimport { clearPath, shuffle } from '../../common/utils';\r\nimport history from '../../history';\r\nimport { routes } from '../../routes';\r\nimport { IPlayer, IPoints, PlayersType } from './types';\r\n\r\nconst initialState: PlayersType = {};\r\n\r\nconst playersSlice = createSlice({\r\n    name: 'players',\r\n    initialState,\r\n    reducers: {\r\n        createPlayer: {\r\n            reducer: (state, action: PayloadAction<{ id: string }>) => {\r\n                if (Object.values(state).length >= TOTAL_PLAYERS) {\r\n                    return;\r\n                }\r\n\r\n                // 1. Получить уже используемые фракции и планшеты\r\n                const usedFaction = Object.values(state).map(i => i.faction);\r\n                const usedMats = Object.values(state).map(i => i.mat);\r\n\r\n                // 2. Рандомно выберем фракции и планшеты, уберем уже используемые\r\n                const randomFactions = shuffle(factions).filter(faction => !usedFaction.includes(faction.name));\r\n                const randomMats = shuffle(mats).filter(mat => !usedMats.includes(mat.name));\r\n\r\n                // 3. Готово!\r\n                const faction = randomFactions[0].name;\r\n                const mat = randomMats[0].name;\r\n\r\n                const player = {\r\n                    id: action.payload.id,\r\n                    name: 'Player ' + (Object.values(state).length + 1),\r\n                    faction,\r\n                    mat,\r\n                    gold: 0,\r\n                    popularity: 0,\r\n                    stars: 0,\r\n                    territories: 0,\r\n                    resources: 0,\r\n                    buildingBonuses: 0,\r\n                    points: 0,\r\n                };\r\n\r\n                state[player.id] = player;\r\n            },\r\n            prepare: () => {\r\n                const id = nanoid();\r\n                return { payload: { id } };\r\n            },\r\n        },\r\n\r\n        editPlayer(state, action: PayloadAction<IPlayer>) {\r\n            return { ...state, [action.payload.id]: action.payload };\r\n        },\r\n\r\n        removePlayer(state, action: PayloadAction<string>) {\r\n            return omit(state, action.payload);\r\n        },\r\n\r\n        deletePlayers() {\r\n            return {};\r\n        },\r\n    },\r\n});\r\n\r\nexport const {\r\n    createPlayer,\r\n    editPlayer,\r\n    removePlayer,\r\n    deletePlayers,\r\n} = playersSlice.actions;\r\n\r\nexport const changeFieldInPlayer = (\r\n    field: 'faction' | 'mat',\r\n    newValue: string,\r\n    playerId: string,\r\n): AppThunk => {\r\n    return (dispatch, getState) => {\r\n        const players = getState().players;\r\n        const prevValue = players[playerId][field];\r\n\r\n        const isValueAlreadySelected = Object.values(players).find(player => player[field] === newValue);\r\n\r\n        if (isValueAlreadySelected) {\r\n            const changesPlayers = { ...players[isValueAlreadySelected.id], [field]: prevValue };\r\n            dispatch(editPlayer(changesPlayers));\r\n        }\r\n\r\n        const changesPlayers = { ...players[playerId], [field]: newValue };\r\n        dispatch(changeFactionPlayer(changesPlayers));\r\n    }\r\n}\r\n\r\nexport const scoreFormSubmit = (player: IPlayer, formData: IPoints, nextPlayer: IPlayer): AppThunk => {\r\n    return (dispatch, getState) => {\r\n        const points = calculatePoints(formData);\r\n\r\n        dispatch(editPlayer({\r\n            ...player,\r\n            ...formData,\r\n            points,\r\n        }));\r\n\r\n        const players = Object.values(getState().players);\r\n        if (players.every(player => player.points > 0)) {\r\n            history.push(routes.result.path);\r\n        } else {\r\n            history.push(`${ clearPath(routes.score.path) }${ findEngNameFactionToUrl(nextPlayer.faction) }`);\r\n        }\r\n    }\r\n}\r\n\r\nexport const addPlayer = (): AppThunk => {\r\n    return async (dispatch, getState) => {\r\n        dispatch(createPlayer());\r\n        const players = Object.values(getState().players);\r\n        const path = getRouteLastAddedPlayer(players);\r\n        history.push(path);\r\n    };\r\n};\r\n\r\nexport const changeFactionPlayer = (player: IPlayer): AppThunk => {\r\n    return (dispatch) => {\r\n        dispatch(editPlayer(player));\r\n        history.push(`${ clearPath(routes.index.path) }${ findEngNameFactionToUrl(player.faction) }`);\r\n    };\r\n};\r\n\r\nexport const deletePlayer = (id: string): AppThunk => {\r\n    return (dispatch => {\r\n        dispatch(removePlayer(id));\r\n        history.push(clearPath(routes['index'].path));\r\n    });\r\n};\r\n\r\nexport const deleteAllPlayers = (): AppThunk => {\r\n    return (dispatch => {\r\n        dispatch(deletePlayers());\r\n        history.push('/');\r\n    });\r\n};\r\n\r\nexport default playersSlice.reducer;\r\n","import keyBy from 'lodash-es/keyBy';\r\nimport { IPlayer, IPoints } from '../features/players/types';\r\nimport { routes } from '../routes';\r\nimport { clearPath } from './utils';\r\n\r\nexport const TOTAL_PLAYERS = 5;\r\n\r\nexport const factionsMoveOrder = [\r\n    'Республика Поляния',\r\n    'Северное королевство',\r\n    'Руссветский союз',\r\n    'Крымское ханство',\r\n    'Саксонская империя',\r\n];\r\n\r\nexport type FactionType = 'polania' | 'saxony' | 'crimean' | 'nordic' | 'rusviet';\r\n\r\nexport const factions = [\r\n    {\r\n        name: 'Республика Поляния',\r\n        shortName: 'Поляния',\r\n        slug: 'polania',\r\n        characterPath: `${ process.env.PUBLIC_URL }/assets/factions/polania.jpg`,\r\n        iconPath: `${ process.env.PUBLIC_URL }/assets/icons/factions/polania.png`,\r\n    },\r\n    {\r\n        name: 'Саксонская империя',\r\n        shortName: 'Саксония',\r\n        slug: 'saxony',\r\n        characterPath: `${ process.env.PUBLIC_URL }/assets/factions/saxony.jpg`,\r\n        iconPath: `${ process.env.PUBLIC_URL }/assets/icons/factions/saxony.png`,\r\n    },\r\n    {\r\n        name: 'Крымское ханство',\r\n        shortName: 'Крым',\r\n        slug: 'crimean',\r\n        characterPath: `${ process.env.PUBLIC_URL }/assets/factions/crimean.jpg`,\r\n        iconPath: `${ process.env.PUBLIC_URL }/assets/icons/factions/crimean.png`,\r\n    },\r\n    {\r\n        name: 'Северное королевство',\r\n        shortName: 'Север',\r\n        slug: 'nordic',\r\n        characterPath: `${ process.env.PUBLIC_URL }/assets/factions/nordic.jpg`,\r\n        iconPath: `${ process.env.PUBLIC_URL }/assets/icons/factions/nordic.png`,\r\n    },\r\n    {\r\n        name: 'Руссветский союз',\r\n        shortName: 'Руссвет',\r\n        slug: 'rusviet',\r\n        characterPath: `${ process.env.PUBLIC_URL }/assets/factions/rusviet.jpg`,\r\n        iconPath: `${ process.env.PUBLIC_URL }/assets/icons/factions/rusviet.png`,\r\n    },\r\n];\r\n\r\nexport const mats = [\r\n    {\r\n        name: 'Промышленный (1)',\r\n        imgPath: `${ process.env.PUBLIC_URL }/assets/mats/industrial1.jpg`,\r\n    },\r\n    {\r\n        name: 'Строительный (2)',\r\n        imgPath: `${ process.env.PUBLIC_URL }/assets/mats/engineering2.jpg`,\r\n    },\r\n    {\r\n        name: 'Патриотический (3)',\r\n        imgPath: `${ process.env.PUBLIC_URL }/assets/mats/patriotic3.jpg`,\r\n    },\r\n    {\r\n        name: 'Технический (4)',\r\n        imgPath: `${ process.env.PUBLIC_URL }/assets/mats/mechanical4.jpg`,\r\n    },\r\n    {\r\n        name: 'Фермерский (5)',\r\n        imgPath: `${ process.env.PUBLIC_URL }/assets/mats/argicultural5.jpg`,\r\n    },\r\n];\r\n\r\nexport const resources = [\r\n    { name: 'Популярность', imgPath: `${ process.env.PUBLIC_URL }/assets/icons/resources/popularity.png` },\r\n    { name: 'Звезд', imgPath: `${ process.env.PUBLIC_URL }/assets/icons/resources/stars.png` },\r\n    { name: 'Территорий', imgPath: `${ process.env.PUBLIC_URL }/assets/icons/resources/territories.png` },\r\n    { name: 'Ресурсов', imgPath: `${ process.env.PUBLIC_URL }/assets/icons/resources/resources.png` },\r\n    { name: 'Бонусов зданий', imgPath: `${ process.env.PUBLIC_URL }/assets/icons/resources/structureBonus.png` },\r\n    { name: 'Монет', imgPath: `${ process.env.PUBLIC_URL }/assets/icons/resources/gold.png` },\r\n];\r\n\r\nexport const structureBonus = [\r\n    'Количество территорий с туннелями',\r\n    'Количество озёр',\r\n    'Количество территорий с символами приключений',\r\n    'Количество территорий с туннелями и вашими зданиями',\r\n    'Количество ваших зданий построенных в один ряд',\r\n    'Количество тундр и ферм с вашими зданиями',\r\n];\r\n\r\nexport function calculatePoints(points: IPoints): number {\r\n    let result = 0;\r\n\r\n    if (points.popularity >= 0 && points.popularity <= 6) {\r\n        result = (points.stars * 3) + (points.territories * 2) + Math.floor(points.resources / 2) + points.buildingBonuses + points.gold;\r\n    } else if (points.popularity >= 7 && points.popularity <= 12) {\r\n        result = (points.stars * 4) + (points.territories * 3) + Math.floor(points.resources / 2) * 2 + points.buildingBonuses + points.gold;\r\n    } else if (points.popularity >= 13 && points.popularity <= 18) {\r\n        result = (points.stars * 5) + (points.territories * 4) + Math.floor(points.resources / 2) * 3 + points.buildingBonuses + points.gold;\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport function findPlayerByFaction(players: IPlayer[], searchWord: string): IPlayer {\r\n    return players.find(item => findEngNameFactionToUrl(item.faction) === searchWord) as IPlayer;\r\n}\r\n\r\nexport function findEngNameFactionToUrl(faction: string = ''): string {\r\n    const dictionaryByFactionNames = keyBy(factions, 'name');\r\n    return dictionaryByFactionNames[faction].slug ? dictionaryByFactionNames[faction].slug : '';\r\n}\r\n\r\nexport function getShortNameFaction(faction: string = ''): string {\r\n    const dictionaryByFactionNames = keyBy(factions, 'name');\r\n    return dictionaryByFactionNames[faction].shortName ? dictionaryByFactionNames[faction].shortName : '';\r\n}\r\n\r\nexport function getLastAddedFaction(players: IPlayer[]): string {\r\n    if (players.length <= 0) return '';\r\n    const lastAddedPlayer = players[players.length - 1];\r\n    return findEngNameFactionToUrl(lastAddedPlayer.faction);\r\n}\r\n\r\nexport function getRouteLastAddedPlayer(players: IPlayer[]) {\r\n    const lastAddedPlayer = players[players.length - 1];\r\n    const homePage = clearPath(routes['index'].path);\r\n    return `${ homePage }${ findEngNameFactionToUrl(lastAddedPlayer.faction) }`;\r\n}\r\n\r\nexport function findFactionWhoHasFirstTurn(players: IPlayer[]): string {\r\n    for (const mat of mats) {\r\n        const playerFirstTurn = players.find(player => player.mat === mat.name);\r\n        if (playerFirstTurn) {\r\n            return findEngNameFactionToUrl(playerFirstTurn.faction);\r\n        }\r\n    }\r\n    return '';\r\n}\r\n\r\nexport function foundPrevNextPlayers(players: IPlayer[] = [], player: IPlayer) {\r\n    const currentIndex = players.findIndex(item => item.id === player.id);\r\n\r\n    const last = players[players.length - 1];\r\n    const first = players[0];\r\n\r\n    const prevPlayer = currentIndex >= 0 && players[currentIndex - 1] ? players[currentIndex - 1] : last;\r\n    const nextPlayer = currentIndex >= 0 && players[currentIndex + 1] ? players[currentIndex + 1] : first;\r\n\r\n    return {\r\n        prevPlayer,\r\n        nextPlayer,\r\n    };\r\n}\r\n\r\n\r\nexport function foundPlayerIndexByFaction(players: IPlayer[], searchFaction: FactionType) {\r\n    const factions = players.map(player => findEngNameFactionToUrl(player.faction));\r\n    const index = factions.findIndex(faction => faction === searchFaction);\r\n    return index <= 0 ? 0 : index;\r\n}\r\n","export default __webpack_public_path__ + \"static/media/bg.2905f7ce.jpg\";","import { Button, Container, Grid, Paper, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { FC } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { ButtonInstallPWA } from '../components/ButtonInstallPWA';\nimport { addPlayer } from '../features/players/playersSlice';\nimport Image from '../img/bg.jpg';\n\nconst useStyles = makeStyles({\n    container: {\n        height: '100vh',\n        paddingBottom: '12vh',\n    },\n    paperContainer: {\n        backgroundColor: '#acacac',\n        backgroundImage: `url(${ Image })`,\n        height: '100%',\n        backgroundPosition: 'top center',\n        backgroundSize: 'cover',\n    },\n    logo: {\n        marginTop: 20,\n        width: 120,\n        height: 120,\n    },\n    title: {\n        paddingTop: 60,\n        fontWeight: 'bold',\n        color: '#fff',\n        fontSize: 46,\n        textShadow: '0 2px 3px rgba(0, 0, 0, 0.4), 0 8px 14px rgba(0, 0, 0, 0.1), 0 18px 30px rgba(0, 0, 0, 0.1)',\n    },\n    btnAddPlayer: {\n        marginTop: 'auto',\n    },\n});\n\nconst First: FC = () => {\n    const dispatch = useDispatch();\n    const classes = useStyles();\n\n    return (\n        <>\n            <Paper className={ classes.paperContainer } elevation={ 0 } square={ true } variant={ 'outlined' }>\n                <Container fixed>\n                    <Grid\n                        className={ classes.container }\n                        container\n                        direction=\"column\"\n                        justify={ 'center' }\n                        alignItems={ 'center' }\n                        spacing={ 2 }\n                    >\n                        <Grid item>\n                            <Typography align={ 'center' } className={ classes.title }>\n                                Scythe Score Calculator\n                            </Typography>\n                        </Grid>\n\n                        <Grid className={ classes.btnAddPlayer } item>\n                            <Button\n                                variant=\"contained\" color=\"secondary\" fullWidth\n                                onClick={ () => dispatch(addPlayer()) }\n                            >\n                                Добавить игрока\n                            </Button>\n                        </Grid>\n\n                        <Grid item>\n                            <ButtonInstallPWA />\n                        </Grid>\n                    </Grid>\n                </Container>\n            </Paper>\n        </>\n    );\n};\n\nexport default First;\n","import React, { FC } from 'react';\r\n\r\ntype Props = {\r\n    name: string;\r\n    iconPath?: string;\r\n}\r\n\r\nconst FactionIcon: FC<Props> = (props) => {\r\n    const { name, iconPath } = props;\r\n\r\n    if (!iconPath) return null;\r\n\r\n    return (\r\n        <img height={ 35 } width={ 35 } src={ iconPath } alt={ name } />\r\n    );\r\n};\r\n\r\nexport default FactionIcon;\r\n","import { Badge } from '@material-ui/core';\nimport green from '@material-ui/core/colors/green';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport React, { FC } from 'react';\nimport { factions } from '../common/scytheLogic';\nimport { IPlayer } from '../features/players/types';\nimport FactionIcon from './FactionIcon';\n\ntype FactionIconType = {\n    player: IPlayer\n}\n\nexport const FactionIconWithBadge: FC<FactionIconType> = ({ player }) => {\n    const getIconPath = (player: IPlayer) => factions.find(i => i.name === player.faction)?.iconPath;\n\n    return (\n        <Badge\n            invisible={ player.points <= 0 }\n            overlap=\"circle\"\n            color=\"default\"\n            badgeContent={ <CheckCircleIcon style={ { fontSize: 16, color: green[400] } } /> }\n        >\n            <FactionIcon name={ player.faction } iconPath={ getIconPath(player) } />\n        </Badge>\n    );\n};\n","import Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { FC } from 'react';\n\nconst useStyles = makeStyles({\n    root: {\n        height: '100%',\n        width: '100%',\n        margin: '0 auto',\n        '@media (min-width: 600px)': {\n            maxWidth: \"100%\",\n        },\n        '@media (min-width: 960px)': {\n            maxWidth: 960,\n        },\n        '@media (min-width: 1280px)': {\n            maxWidth: 1280,\n        },\n    },\n});\n\ntype Props = {\n    index: any;\n    value: any;\n    children?: React.ReactNode;\n    dir?: string;\n}\n\nexport const TabPanel: FC<Props> = (props) => {\n    const { children, value, index, ...other } = props;\n    const classes = useStyles();\n\n    return (\n        <div\n            className={ classes.root }\n            role=\"tabpanel\"\n            hidden={ value !== index }\n            id={ `full-width-tabpanel-${ index }` }\n            aria-labelledby={ `full-width-tab-${ index }` }\n            { ...other }\n        >\n            { value === index && (\n                <Box p={ 2 }>\n                    { children }\n                </Box>\n            ) }\n        </div>\n    );\n};\n","import { AppBar, Paper, Tab, Tabs, Toolbar } from '@material-ui/core';\nimport { makeStyles, Theme, useTheme } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport React, { FC, ReactNode, useEffect } from 'react';\nimport { Link, useHistory, useParams, useRouteMatch } from 'react-router-dom';\nimport SwipeableViews from 'react-swipeable-views';\nimport { factions, FactionType, findEngNameFactionToUrl, foundPlayerIndexByFaction } from '../common/scytheLogic';\nimport { clearPath } from '../common/utils';\nimport { IPlayer } from '../features/players/types';\nimport { routes } from '../routes';\nimport { AppMenuNavigation } from './AppMenuNavigation';\nimport { FactionIconWithBadge } from './FactionIconWithBadge';\nimport { TabPanel } from './TabPanel';\n\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    root: {\n        backgroundColor: theme.palette.background.paper,\n        width: '100%',\n    },\n    paper: {\n        backgroundColor: theme.palette.background.default,\n        width: '100%',\n        height: '100%',\n        paddingTop: 65,\n        paddingBottom: 55,\n    },\n    tab: {\n        padding: '3px 6px',\n        fontSize: '12px',\n        fontWeight: 300,\n        textTransform: 'initial',\n        opacity: 0.4,\n        minHeight: 65,\n        color: theme.palette.text.primary,\n    },\n    swipeableViews: { height: '100%' },\n}));\n\n\ntype Props = {\n    players: IPlayer[],\n    children: ReactNode\n    faction?: FactionType\n}\n\nexport const FullWidthTabs: FC<Props> = ({ children, players }) => {\n    const classes = useStyles();\n    const theme = useTheme();\n    const { id: faction } = useParams<{ id: FactionType }>();\n\n    const [value, setValue] = React.useState(foundPlayerIndexByFaction(players, faction));\n\n    const history = useHistory();\n    let factionUrl = useRouteMatch(routes.index.path);\n    let scoreUrl = useRouteMatch(routes.score.path);\n    const url = factionUrl?.path || scoreUrl?.path || '';\n\n    const handleChange = (event: React.ChangeEvent<{}>, value: number) => {\n        setValue(value);\n    };\n\n    const handleChangeIndex = (index: number) => {\n        if (index < players.length) {\n            setValue(index);\n            history.push(`${ clearPath(url) }${ findEngNameFactionToUrl(players[index].faction) }`);\n        }\n    };\n\n    useEffect(() => {\n        setValue(foundPlayerIndexByFaction(players, faction));\n    }, [faction]);\n\n    const getLabel = (player: IPlayer) => factions.find(i => i.name === player.faction)?.shortName;\n\n    return (\n        <Paper className={ classes.paper }>\n            <AppBar className={ classes.root } position=\"fixed\">\n                <div className=\"container\">\n                    <Toolbar>\n                        <Tabs\n                            value={ value }\n                            onChange={ handleChange }\n                            scrollButtons=\"auto\"\n                            variant=\"scrollable\"\n                            indicatorColor=\"secondary\"\n                        >\n                            { players.map((player: IPlayer) => (\n                                <Tab\n                                    key={ player.faction }\n                                    component={ Link }\n                                    className={ clsx(classes.tab, 'faction-tab') }\n                                    label={ getLabel(player) }\n                                    icon={ <FactionIconWithBadge player={ player } /> }\n                                    to={ `${ clearPath(url) }${ findEngNameFactionToUrl(player.faction) }` }\n                                />\n                            )) }\n                        </Tabs>\n                    </Toolbar>\n                </div>\n            </AppBar>\n\n            <SwipeableViews\n                threshold={2}\n                hysteresis={0.1}\n                resistance\n                className={ classes.swipeableViews }\n                axis={ theme.direction === 'rtl' ? 'x-reverse' : 'x' }\n                index={ value }\n                onChangeIndex={ handleChangeIndex }\n            >\n                { players.map((player, index) => (\n                    <TabPanel key={ player.faction } value={ value } index={ index } dir={ theme.direction }>\n                        { children }\n                    </TabPanel>\n                )) }\n            </SwipeableViews>\n\n            <AppMenuNavigation />\n        </Paper>\n    );\n};\n","import { CardMedia } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport React from 'react';\r\n\r\nconst useStyles = makeStyles({\r\n    media: {\r\n        objectPosition: '50% 25%',\r\n        height: '25vh',\r\n        minHeight: 140\r\n    },\r\n});\r\n\r\ntype Props = {\r\n    name?: string,\r\n    characterPath?: string\r\n};\r\n\r\nconst FactionCharacterImage: React.FC<Props> = (props) => {\r\n    const { name = '', characterPath = '' } = props;\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <CardMedia\r\n            component=\"img\"\r\n            className={ classes.media }\r\n            image={ characterPath }\r\n            alt={ name }\r\n            title={ name }\r\n        />\r\n    );\r\n};\r\n\r\nexport default FactionCharacterImage;\r\n","import { createSelector } from '@reduxjs/toolkit';\nimport _ from 'lodash';\nimport { RootState } from '../../app/rootReducer';\nimport { factionsMoveOrder, findEngNameFactionToUrl, mats } from '../../common/scytheLogic';\nimport { IPlayer } from './types';\n\nexport const getPlayers = (state: RootState) => Object.values(state.players);\n\nexport const getPlayerWhoHasFirstTurn = createSelector(\n    [getPlayers],\n    (players: IPlayer[]) => {\n        for (const mat of mats) {\n            const playerFirstTurn = players.find(player => player.mat === mat.name);\n            if (playerFirstTurn) {\n                return playerFirstTurn;\n            }\n        }\n        return null;\n    });\n\nexport const getPlayersSortByFirstTurn = createSelector(\n    [getPlayers, getPlayerWhoHasFirstTurn],\n    (players: IPlayer[], player: IPlayer | null) => {\n        const playerFirstTurnIndex = factionsMoveOrder.indexOf(player?.faction as string);\n        let turnOrder: (string | undefined)[] = [];\n\n        const isFound = playerFirstTurnIndex !== -1;\n\n        if (isFound) {\n            const reversedMoveOrder = factionsMoveOrder\n                .map((item, index) => {\n                    return _.nth(factionsMoveOrder, playerFirstTurnIndex - index);\n                })\n                .filter(faction => players.find(it => it.faction === faction));\n            const fistElement = reversedMoveOrder.slice(0, 1);\n            const other = reversedMoveOrder.slice(1, reversedMoveOrder.length).reverse();\n            turnOrder = [...fistElement, ...other];\n        }\n\n        return turnOrder.map(item => players.find(player => player.faction === item)) as IPlayer[];\n    });\n\nexport const getPlayerByFaction = (faction: string) => createSelector(\n    [getPlayers],\n    (players: IPlayer[]) => {\n        return players.find(item => findEngNameFactionToUrl(item.faction) === faction);\n    },\n);\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport interface INames {\n    name: string;\n    inputValue?: string;\n}\n\nconst initialState: INames[] = [];\n\nconst namesSlice = createSlice({\n    name: 'names',\n    initialState,\n    reducers: {\n        addName(state, action: PayloadAction<INames>) {\n            state.push(action.payload);\n        },\n        deleteName(state, action: PayloadAction<string>) {\n            return state.filter(({ name }) => name !== action.payload);\n        },\n        changeName(state, action: PayloadAction<string>) {\n            return state.map(obj => {\n\n                if (obj.name === action.payload) {\n                    return { ...obj, name: action.payload };\n                }\n\n                return obj;\n            });\n        },\n    },\n});\n\nexport const {\n    addName,\n    deleteName,\n    changeName,\n} = namesSlice.actions;\n\nexport default namesSlice.reducer;\n","import { RootState } from '../../app/rootReducer';\n\nexport const getNames = (state: RootState) => state.names\n","import { IconButton } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Autocomplete, { createFilterOptions } from '@material-ui/lab/Autocomplete';\nimport React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { editPlayer } from '../players/playersSlice';\nimport { getPlayerByFaction } from '../players/selectors';\nimport { addName, changeName, deleteName, INames } from './namesSlice';\nimport { getNames } from './selectors';\n\nconst filter = createFilterOptions<INames>();\n\nexport function AutocompletePlayerName() {\n    const { id } = useParams<{ id: string }>();\n    const names = useSelector(getNames);\n    const dispatch = useDispatch();\n    const player = useSelector(getPlayerByFaction(id));\n\n    const createName = (obj: INames) => {\n        dispatch(addName(obj));\n        if (player?.id) {\n            dispatch(editPlayer({ ...player, name: obj.name }));\n        }\n    };\n\n    const setName = (obj: INames) => {\n        dispatch(changeName(obj.name));\n        if (player?.id) {\n            dispatch(editPlayer({ ...player, name: obj.name }));\n        }\n    };\n\n    const handleDeleteName = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>, name: string) => {\n        dispatch(deleteName(name));\n        event.stopPropagation();\n    };\n\n    return (\n        <Autocomplete\n            value={ { name: player?.name || 'Player' } }\n            onChange={ (event, newValue) => {\n                if (typeof newValue === 'string') {\n                    createName({\n                        name: newValue,\n                    });\n                } else if (newValue && newValue.inputValue) {\n                    createName({\n                        // Срабатывает, когда вводим имя\n                        name: newValue.inputValue,\n                    });\n                } else if (newValue) {\n                    if (player?.name === newValue.name) {\n                        return;\n                    }\n                    // Срабатывает, когда выбираем уже из доступных имен\n                    setName({ name: newValue.name });\n                }\n            } }\n            filterOptions={ (options, params) => {\n                const filtered = filter(options, params);\n\n                const isNameNotEmpty = params.inputValue !== '';\n                const isNameUnique = params.inputValue !== player?.name;\n                const isNameExist = names.findIndex(i => i.name === params.inputValue) === -1;\n                if (isNameNotEmpty && isNameUnique && isNameExist) {\n                    filtered.push({\n                        inputValue: params.inputValue,\n                        name: `Добавить \"${ params.inputValue }\"`,\n                    });\n                }\n\n                return filtered;\n            } }\n            selectOnFocus\n            clearOnBlur\n            handleHomeEndKeys\n            options={ names }\n            getOptionLabel={ (option) => {\n                if (typeof option === 'string') {\n                    return option;\n                }\n\n                if (option?.inputValue) {\n                    return option.inputValue;\n                }\n\n                return option?.name;\n            } }\n            renderOption={ (option) => {\n                if (option.inputValue) return option.name;\n                return (\n                    <div\n                        style={ {\n                            display: 'flex',\n                            width: '100%',\n                            height: 30,\n                            justifyContent: 'space-between',\n                            alignItems: 'center',\n                        } }\n                    >\n                        <p>{ option.name }</p>\n                        <IconButton aria-label=\"delete\" onClick={ (event) => handleDeleteName(event, option.name) }>\n                            <DeleteIcon fontSize=\"small\" />\n                        </IconButton>\n                    </div>\n                );\n            } }\n            freeSolo\n            renderInput={ (params) => (\n                <TextField\n                    { ...params }\n                    label=\"Имя\"\n                    variant=\"outlined\"\n                    size=\"medium\"\n                    fullWidth\n                />\n            ) }\n        />\n    );\n}\n","import { Button, Card, CardActions, CardContent, Collapse, IconButton, MenuItem } from '@material-ui/core';\nimport Grid from '@material-ui/core/Grid';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport clsx from 'clsx';\nimport React, { FunctionComponent } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { factions, FactionType, mats } from '../../common/scytheLogic';\nimport FactionCharacterImage from '../../components/FactionCharacterImage';\nimport FactionIcon from '../../components/FactionIcon';\nimport { AutocompletePlayerName } from '../names/AutocompletePlayerName';\nimport { changeFieldInPlayer, deletePlayer } from './playersSlice';\nimport { getPlayerByFaction } from './selectors';\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        root: {\n            minHeight: 370,\n        },\n        expand: {\n            transform: 'rotate(0deg)',\n            marginLeft: 'auto',\n            transition: theme.transitions.create('transform', {\n                duration: theme.transitions.duration.shortest,\n            }),\n        },\n        cardActions: {\n            paddingBottom: 0,\n            paddingTop: 0,\n        },\n        cardContent: {\n            paddingTop: 0,\n        },\n        expandOpen: {\n            transform: 'rotate(180deg)',\n        },\n        matImage: {\n            width: '100%',\n            height: 'auto',\n        },\n    }),\n);\n\nexport const PlayerCard: FunctionComponent = () => {\n    const { id: faction } = useParams<{ id: FactionType }>();\n    const player = useSelector(getPlayerByFaction(faction));\n    const dispatch = useDispatch();\n\n    const classes = useStyles();\n    const [expanded, setExpanded] = React.useState(false);\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    if (!player?.id) return null;\n\n    const handleChangeFaction = (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n        dispatch(changeFieldInPlayer('faction', event.target.value, player.id));\n    };\n\n    const handleChangeMat = (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n        dispatch(changeFieldInPlayer('mat', event.target.value, player.id));\n    };\n\n    const handleDeletePlayer = () => {\n        dispatch(deletePlayer(player.id));\n    };\n\n    return (\n        <Card className={ classes.root }>\n            <FactionCharacterImage { ...factions.find(i => i.name === player.faction) } />\n            <CardContent>\n                <Grid container spacing={ 2 } direction={ 'row' }>\n                    <Grid item xs={ 12 } sm={ 6 }>\n                        <AutocompletePlayerName />\n                    </Grid>\n\n                    <Grid item>\n                        <TextField\n                            select\n                            SelectProps={ {\n                                renderValue: (value: any) => {\n                                    const faction = factions.find(i => i.name === value);\n                                    return (\n                                        <div\n                                            style={ {\n                                                display: 'flex',\n                                                alignItems: 'center',\n                                            } }\n                                        >\n                                            { faction && <FactionIcon { ...faction } /> }\n                                        </div>);\n                                },\n                            } }\n                            label=\"Фракция\"\n                            value={ player.faction }\n                            onChange={ handleChangeFaction }\n                            variant=\"outlined\"\n                            size=\"small\"\n                        >\n                            { factions.map((value) => (\n                                <MenuItem key={ value.name } value={ value.name }>\n                                    <FactionIcon { ...value } />&nbsp;&nbsp;&nbsp;{ value.name }\n                                </MenuItem>\n                            )) }\n                        </TextField>\n                    </Grid>\n\n                    <Grid item xs>\n                        <TextField\n                            select\n                            label=\"Планшет\"\n                            value={ player.mat }\n                            onChange={ handleChangeMat }\n                            variant=\"outlined\"\n                            size=\"medium\"\n                            fullWidth\n                        >\n                            { mats.map((mat) => (\n                                <MenuItem key={ mat.name } value={ mat.name }>\n                                    { mat.name }\n                                </MenuItem>\n                            )) }\n                        </TextField>\n                    </Grid>\n                </Grid>\n            </CardContent>\n\n            <CardActions disableSpacing className={ classes.cardActions }>\n                <Button\n                    color=\"secondary\"\n                    size=\"medium\"\n                    onClick={ handleDeletePlayer }\n                >\n                    Удалить\n                </Button>\n\n                <IconButton\n                    className={ clsx(classes.expand, {\n                        [classes.expandOpen]: expanded,\n                    }) }\n                    onClick={ handleExpandClick }\n                    aria-expanded={ expanded }\n                    aria-label=\"show mat\"\n                >\n                    <ExpandMoreIcon />\n                </IconButton>\n            </CardActions>\n\n            <Collapse in={ expanded } timeout=\"auto\" unmountOnExit>\n                <CardContent className={ classes.cardContent }>\n                    <img\n                        className={ classes.matImage }\n                        src={ `${ mats.find(mat => mat.name === player.mat)?.imgPath }` }\n                        alt={ player.mat }\n                    />\n                </CardContent>\n            </Collapse>\n        </Card>\n    );\n};\n","import Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport React, { FunctionComponent } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Redirect, useParams } from 'react-router-dom';\nimport { FactionType, findPlayerByFaction, getRouteLastAddedPlayer, TOTAL_PLAYERS } from '../common/scytheLogic';\nimport { FullWidthTabs } from '../components/FullWidthTabs';\nimport { PlayerCard } from '../features/players/PlayerCard';\nimport { addPlayer, deleteAllPlayers } from '../features/players/playersSlice';\nimport { getPlayers } from '../features/players/selectors';\n\nconst Home: FunctionComponent = () => {\n    const players = useSelector(getPlayers);\n    const dispatch = useDispatch();\n\n    // Проверка есть ли игроки или нужно показать начальную страницу\n    const { id: faction } = useParams<{ id: FactionType }>();\n    const player = findPlayerByFaction(players, faction);\n\n    if (!faction && players.length) {\n        return <Redirect to={ getRouteLastAddedPlayer(players) } />;\n    }\n\n    if (!players.length) {\n        return <Redirect to={ '/' } />;\n    }\n\n    return (\n        <FullWidthTabs players={ players } faction={ faction }>\n            <PlayerCard />\n\n            <Grid container direction=\"column\" spacing={ 2 } justify={ 'center' } style={ { paddingTop: 20 } }>\n                <Grid item>\n                    <Button\n                        variant=\"contained\" disabled={ players.length >= TOTAL_PLAYERS } color=\"secondary\" fullWidth\n                        onClick={ () => dispatch(addPlayer()) }\n                    >\n                        Добавить игрока\n                    </Button>\n                </Grid>\n\n                <Grid item>\n                    <Button\n                        variant=\"contained\" disabled={ !player } color=\"primary\" fullWidth\n                        onClick={ () => dispatch(deleteAllPlayers()) }\n                    >\n                        Новая игра\n                    </Button>\n                </Grid>\n            </Grid>\n        </FullWidthTabs>\n    );\n};\n\nexport default Home;\n","import { Button, Paper, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from '@material-ui/core';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport mapKeys from 'lodash-es/mapKeys';\nimport React, { FunctionComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { RootState } from '../app/rootReducer';\nimport { getShortNameFaction, resources } from '../common/scytheLogic';\nimport MainLayout from '../components/MainLayout';\nimport { deletePlayers, editPlayer } from '../features/players/playersSlice';\nimport { PlayersType } from '../features/players/types';\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        root: {\n            borderCollapse: 'separate',\n            minWidth: 320,\n        },\n        sticky: {\n            position: 'sticky',\n            background: theme.palette.background.paper,\n            left: 0,\n            zIndex: 1,\n        },\n        resourceIcon: {\n            verticalAlign: 'middle',\n        },\n    }),\n);\n\ntype Props = {\n    players: PlayersType;\n    editPlayer: typeof editPlayer;\n    deletePlayers: typeof deletePlayers;\n}\n\nconst Result: FunctionComponent<Props> = (props) => {\n    const history = useHistory();\n    const classes = useStyles();\n\n    const {\n        players,\n        deletePlayers,\n        editPlayer,\n    } = props;\n\n    const sortedPlayers = [...Object.values(players)].sort((a, b) => b.points - a.points);\n    const playersByWinningPosition = sortedPlayers.map((player, index) => ({ ...player, gameEndPosition: index + 1 }));\n    const converted = { ...mapKeys(playersByWinningPosition, 'id') };\n\n    const handleNewGame = () => {\n        // TODO добавить сохранение места\n        const sortedPlayers = [...Object.values(players)].sort((a, b) => b.points - a.points);\n        sortedPlayers.forEach((player, index) => editPlayer({ ...player, gameEndPosition: index + 1 }));\n\n        deletePlayers();\n        setTimeout(() => {history.push('/');}, 100);\n    };\n\n    return (\n        <MainLayout className={ 'result-page' }>\n            <TableContainer component={ Paper }>\n                <Table className={ classes.root } size=\"small\">\n                    <TableHead>\n                        <TableRow>\n                            <TableCell align=\"center\" size={ 'small' }>№</TableCell>\n                            <TableCell className={ classes.sticky }>Игрок</TableCell>\n                            {\n                                resources.map(resource => (\n                                    <TableCell align=\"center\" key={ resource.name }>\n                                        <img className={ classes.resourceIcon } width={ 30 } height={ 30 } src={ resource.imgPath } alt={ resource.name } />\n                                    </TableCell>\n                                ))\n                            }\n                            <TableCell align=\"center\">Всего</TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                        { Object.values(converted).map((player) => (\n                            <TableRow key={ player.name }>\n                                <TableCell align=\"center\">{ player.gameEndPosition }</TableCell>\n                                <TableCell className={ classes.sticky } component=\"th\" scope=\"player\" size={ 'small' }>\n                                    { player.name }\n                                    <br />\n                                    { getShortNameFaction(player.faction) }\n                                    <br />\n                                    { player.mat }\n                                </TableCell>\n                                <TableCell size={ 'small' } align=\"center\">{ player.popularity }</TableCell>\n                                <TableCell size={ 'small' } align=\"center\">{ player.stars }</TableCell>\n                                <TableCell size={ 'small' } align=\"center\">{ player.territories }</TableCell>\n                                <TableCell size={ 'small' } align=\"center\">{ player.resources }</TableCell>\n                                <TableCell size={ 'small' } align=\"center\">{ player.buildingBonuses }</TableCell>\n                                <TableCell size={ 'small' } align=\"center\">{ player.gold }</TableCell>\n                                <TableCell size={ 'small' } align=\"center\">{ player.points }</TableCell>\n                            </TableRow>\n                        )) }\n                    </TableBody>\n                </Table>\n            </TableContainer>\n            <br />\n            <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={ handleNewGame }\n                fullWidth\n            >\n                Новая игра\n            </Button>\n        </MainLayout>\n    );\n};\n\nexport default connect(\n    (state: RootState) => ({\n        players: state.players,\n    }),\n    { deletePlayers, editPlayer },\n)(Result);\n","import { yupResolver } from '@hookform/resolvers/yup';\nimport { Button, Grid, InputAdornment, TextField, Typography } from '@material-ui/core';\nimport DonutLargeIcon from '@material-ui/icons/DonutLarge';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport HomeIcon from '@material-ui/icons/Home';\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\nimport StarIcon from '@material-ui/icons/Star';\nimport TerrainIcon from '@material-ui/icons/Terrain';\nimport React, { FC, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport * as yup from 'yup';\nimport { foundPrevNextPlayers } from '../../common/scytheLogic';\nimport { scoreFormSubmit } from './playersSlice';\nimport { getPlayerByFaction, getPlayersSortByFirstTurn } from './selectors';\nimport { IPlayer, IPoints } from './types';\n\nconst text = {\n    min: `Значение не может быть отрицательным`,\n    max: (max: number) => `Значение не может быть больше ${ max }`,\n};\n\nconst schema = yup.object().shape({\n    gold: yup.number().required().min(0, text.min).integer().typeError('Введите накопленные монеты'),\n    popularity: yup.number().required().min(0, text.min).max(18, text.max(18)).integer().typeError('Введите накопленную популярность'),\n    stars: yup.number().required().min(0, text.min).max(6, text.max(6)).integer().typeError('Введите накопленные звезды'),\n    territories: yup.number().required().min(0, text.min).integer().typeError('Введите кол-во контролируемых территорий'),\n    resources: yup.number().required().min(0, text.min).integer().typeError('Введите кол-во контролируемых ресурсов'),\n    buildingBonuses: yup.number().required().min(0, text.min).max(9, text.max(9)).integer().typeError('Введите кол-во монет за бонус зданий'),\n});\n\nexport const ScoreForm: FC = () => {\n    const { id } = useParams<{ id: string }>();\n    const players = useSelector(getPlayersSortByFirstTurn);\n    const player = useSelector(getPlayerByFaction(id));\n    const dispatch = useDispatch();\n\n    const { nextPlayer } = foundPrevNextPlayers(players, player as IPlayer);\n\n    const { register, handleSubmit, errors, reset } = useForm<IPoints>({\n        defaultValues: {\n            gold: player?.gold,\n            popularity: player?.popularity,\n            stars: player?.stars,\n            territories: player?.territories,\n            resources: player?.resources,\n            buildingBonuses: player?.buildingBonuses,\n        },\n        mode: 'onSubmit',\n        resolver: yupResolver(schema),\n    });\n\n    useEffect(() => {\n        if (!player?.gold &&\n            !player?.popularity &&\n            !player?.stars &&\n            !player?.territories &&\n            !player?.resources &&\n            !player?.buildingBonuses) {\n            reset({\n                gold: undefined,\n                popularity: undefined,\n                stars: undefined,\n                territories: undefined,\n                resources: undefined,\n                buildingBonuses: undefined,\n            });\n        } else {\n            reset(player);\n        }\n    }, [reset, player]);\n\n    const onSubmit = (formData: IPoints) => {\n        if (player) {\n            dispatch(scoreFormSubmit(player, formData, nextPlayer));\n        }\n    };\n\n    const handleOnFocus = (event: React.FocusEvent<any>): void => {\n        event.target.select();\n    };\n\n    return (\n        <form onSubmit={ handleSubmit(onSubmit) } autoComplete=\"off\">\n            <Grid container direction={ 'column' } spacing={ 2 }>\n                <Grid item>\n                    <TextField\n                        error={ !!errors.gold }\n                        helperText={ (errors?.gold as any)?.message }\n                        inputRef={ register }\n                        id=\"gold\"\n                        name=\"gold\"\n                        fullWidth\n                        variant=\"outlined\"\n                        size=\"small\"\n                        label=\"Монеты на руках\"\n                        type=\"number\"\n                        onFocus={ handleOnFocus }\n                        InputProps={ {\n                            startAdornment: (\n                                <InputAdornment position=\"start\">\n                                    <MonetizationOnIcon />\n                                </InputAdornment>\n                            ),\n                        } }\n                    />\n                </Grid>\n\n                <Grid item>\n                    <TextField\n                        error={ !!errors.popularity }\n                        helperText={ (errors?.popularity as any)?.message }\n                        inputRef={ register }\n                        id=\"popularity\"\n                        name=\"popularity\"\n                        fullWidth\n                        variant=\"outlined\"\n                        size=\"small\"\n                        label=\"Популярность\"\n                        type=\"number\"\n                        onFocus={ handleOnFocus }\n                        InputProps={ {\n                            startAdornment: (\n                                <InputAdornment position=\"start\">\n                                    <FavoriteIcon />\n                                </InputAdornment>\n                            ),\n                        } }\n                    />\n                </Grid>\n\n                <Grid item>\n                    <TextField\n                        error={ !!errors.stars }\n                        helperText={ (errors?.stars as any)?.message }\n                        inputRef={ register }\n                        id=\"stars\"\n                        name=\"stars\"\n                        fullWidth\n                        variant=\"outlined\"\n                        size=\"small\"\n                        label=\"Кол-во звезд\"\n                        type=\"number\"\n                        onFocus={ handleOnFocus }\n                        InputProps={ {\n                            startAdornment: (\n                                <InputAdornment position=\"start\">\n                                    <StarIcon />\n                                </InputAdornment>\n                            ),\n                        } }\n                    />\n                </Grid>\n\n                <Grid item>\n                    <TextField\n                        error={ !!errors.territories }\n                        helperText={ (errors?.territories as any)?.message }\n                        inputRef={ register }\n                        id=\"territories\"\n                        name=\"territories\"\n                        fullWidth\n                        variant=\"outlined\"\n                        size=\"small\"\n                        label=\"Территорий (фабрика дает +3)\"\n                        type=\"number\"\n                        onFocus={ handleOnFocus }\n                        InputProps={ {\n                            startAdornment: (\n                                <InputAdornment position=\"start\">\n                                    <TerrainIcon />\n                                </InputAdornment>\n                            ),\n                        } }\n                    />\n                </Grid>\n\n                <Grid item>\n                    <TextField\n                        error={ !!errors.resources }\n                        helperText={ (errors?.resources as any)?.message }\n                        inputRef={ register }\n                        id=\"resources\"\n                        name=\"resources\"\n                        fullWidth\n                        variant=\"outlined\"\n                        size=\"small\"\n                        label=\"Всего ресурсов (каждый ресурс)\"\n                        type=\"number\"\n                        onFocus={ handleOnFocus }\n                        InputProps={ {\n                            startAdornment: (\n                                <InputAdornment position=\"start\">\n                                    <DonutLargeIcon />\n                                </InputAdornment>\n                            ),\n                        } }\n                    />\n                </Grid>\n\n                <Grid item>\n                    <TextField\n                        error={ !!errors.buildingBonuses }\n                        helperText={ (errors?.buildingBonuses as any)?.message }\n                        inputRef={ register }\n                        id=\"buildingBonuses\"\n                        name=\"buildingBonuses\"\n                        fullWidth\n                        variant=\"outlined\"\n                        size=\"small\"\n                        label=\"Бонусы зданий\"\n                        type=\"number\"\n                        onFocus={ handleOnFocus }\n                        InputProps={ {\n                            startAdornment: (\n                                <InputAdornment position=\"start\">\n                                    <HomeIcon />\n                                </InputAdornment>\n                            ),\n                        } }\n                    />\n                </Grid>\n\n                <Grid item>\n                    <Grid container alignItems={ 'center' } justify={ 'space-between' } spacing={ 2 }>\n                        <Grid item xs={ 12 }>\n                            <Button type=\"submit\" color=\"primary\" variant=\"contained\" fullWidth>Подсчитать</Button>\n                        </Grid>\n\n                        { player?.points\n                            ? <Grid item><Typography variant={ 'h6' }>Очков: { player?.points }</Typography></Grid>\n                            : null\n                        }\n                    </Grid>\n                </Grid>\n            </Grid>\n        </form>\n    );\n};\n","import { Grid, Typography } from '@material-ui/core';\r\nimport React, { FC } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\nimport { FactionType } from '../common/scytheLogic';\r\nimport { FullWidthTabs } from '../components/FullWidthTabs';\r\nimport { ScoreForm } from '../features/players/ScoreForm';\r\nimport { getPlayerByFaction, getPlayersSortByFirstTurn } from '../features/players/selectors';\r\nimport NotFound from './NotFound';\r\n\r\nconst Score: FC = () => {\r\n    const { id: faction } = useParams<{ id: FactionType }>();\r\n    const players = useSelector(getPlayersSortByFirstTurn);\r\n    const player = useSelector(getPlayerByFaction(faction));\r\n\r\n    if (!player || !players) return <NotFound />;\r\n\r\n    return (\r\n        <>\r\n            <FullWidthTabs players={ players } faction={ faction }>\r\n                <Grid container direction={ 'column' } spacing={ 3 } style={ { height: '100%' } }>\r\n                    <Grid item>\r\n                        <Typography variant={ 'h5' }>Игрок: { player.name }</Typography>\r\n                    </Grid>\r\n\r\n                    <Grid item><ScoreForm /></Grid>\r\n                </Grid>\r\n            </FullWidthTabs>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Score;\r\n","import First from './pages/First';\r\nimport Home from './pages/Home';\r\nimport NotFound from './pages/NotFound';\r\nimport Result from './pages/Result';\r\nimport Score from './pages/Score';\r\nimport Settings from './pages/Settings';\r\n\r\nexport const routes = {\r\n    'first': {\r\n        path: '/',\r\n        title: '',\r\n        exact: true,\r\n        component: First,\r\n    },\r\n    'index': {\r\n        path: '/faction/:id?/',\r\n        title: 'Фракции',\r\n        exact: false,\r\n        component: Home,\r\n    },\r\n    'score': {\r\n        path: '/score/:id?/',\r\n        title: 'Подсчет очков',\r\n        exact: true,\r\n        component: Score,\r\n    },\r\n    'result': {\r\n        path: '/result',\r\n        title: 'Итоги по окончанию игры',\r\n        exact: true,\r\n        component: Result,\r\n    },\r\n    'map': {\r\n        path: '/map',\r\n        title: 'Карта',\r\n        exact: true,\r\n        component: NotFound,\r\n    },\r\n    'settings': {\r\n        path: '/settings',\r\n        title: 'Настройки',\r\n        exact: true,\r\n        component: Settings,\r\n    },\r\n};\r\n","import { Grid, Link } from '@material-ui/core';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport React, { FunctionComponent } from 'react';\nimport MainLayout from '../components/MainLayout';\n\ninterface OwnProps {}\n\ntype Props = OwnProps;\n\nconst Settings: FunctionComponent<Props> = (props) => {\n    return (\n        <MainLayout>\n            <Grid container>\n                <Grid item>\n                    <Link rel=\"noopener\" href=\"https://github.com/justbenya/scythe-app\">\n                        <GitHubIcon fontSize={ 'large' } style={ { color: '#fff' } } />\n                    </Link>\n                </Grid>\n\n            </Grid>\n\n        </MainLayout>\n    );\n};\n\nexport default Settings;\n","import { BottomNavigation, BottomNavigationAction } from '@material-ui/core';\r\nimport DonutLargeIcon from '@material-ui/icons/DonutLarge';\r\nimport ListAltIcon from '@material-ui/icons/ListAlt';\r\nimport PeopleIcon from '@material-ui/icons/People';\r\nimport React, { FC } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { RootState } from '../app/rootReducer';\r\nimport { findEngNameFactionToUrl, getLastAddedFaction } from '../common/scytheLogic';\r\nimport { clearPath } from '../common/utils';\r\nimport { getPlayerWhoHasFirstTurn } from '../features/players/selectors';\r\nimport { IPlayer } from '../features/players/types';\r\nimport { routes } from '../routes';\r\n\r\nexport const AppMenuNavigation: FC = () => {\r\n    const history = useHistory();\r\n    const players = useSelector<RootState, IPlayer[]>(state => Object.values(state.players));\r\n    const player = useSelector(getPlayerWhoHasFirstTurn);\r\n\r\n    return (\r\n        <BottomNavigation className=\"menu-footer\" value={ history.location.pathname } showLabels>\r\n            <BottomNavigationAction\r\n                icon={ <PeopleIcon /> }\r\n                component={ Link }\r\n                label=\"Игроки\"\r\n                value={ history.location.pathname.includes(clearPath(routes.index.path)) ? history.location.pathname : null }\r\n                to={ `${ clearPath(routes.index.path) }${ getLastAddedFaction(players) }` }\r\n            />\r\n\r\n            <BottomNavigationAction\r\n                disabled={ !players.length }\r\n                icon={ <DonutLargeIcon /> }\r\n                component={ Link }\r\n                label=\"Очки\"\r\n                value={ history.location.pathname.includes(clearPath(routes.score.path)) ? history.location.pathname : null }\r\n                to={ `${ clearPath(routes.score.path) }${ findEngNameFactionToUrl(player?.faction) }` }\r\n            />\r\n\r\n            <BottomNavigationAction\r\n                disabled={ !players.length }\r\n                icon={ <ListAltIcon /> }\r\n                component={ Link }\r\n                label=\"Результаты\"\r\n                value={ routes.result.path }\r\n                to={ routes.result.path }\r\n            />\r\n\r\n            {/*<BottomNavigationAction*/}\r\n            {/*    icon={ <SettingsIcon /> }*/}\r\n            {/*    component={ Link }*/}\r\n            {/*    label=\"Настройки\"*/}\r\n            {/*    value=\"/settings\"*/}\r\n            {/*    to=\"/settings\"*/}\r\n            {/*/>*/}\r\n        </BottomNavigation>\r\n    );\r\n};\r\n","import Container from '@material-ui/core/Container';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport clsx from 'clsx';\r\nimport React, { FC } from 'react';\r\n// @ts-ignore\r\nimport useOrientationChange from 'use-orientation-change';\r\nimport { AppMenuNavigation } from './AppMenuNavigation';\r\n\r\nconst useStyles = makeStyles({\r\n    fixed: {\r\n        '@media (min-width: 600px)': {\r\n            maxWidth: '100%',\r\n        },\r\n        '@media (min-width: 960px)': {\r\n            maxWidth: 960,\r\n        },\r\n        '@media (min-width: 1280px)': {\r\n            maxWidth: 1280,\r\n        },\r\n    },\r\n    main: {\r\n        height: '100%',\r\n        padding: '10px 0 50px 0',\r\n    },\r\n});\r\n\r\ntype Props = {\r\n    [name: string]: any;\r\n}\r\n\r\nconst MainLayout: FC<Props> = (props) => {\r\n    const { className } = props;\r\n    const classes = useStyles();\r\n    const orientation = useOrientationChange();\r\n\r\n    return (\r\n        <>\r\n            <Container fixed className={ classes.fixed }>\r\n                <main className={ clsx(classes.main, className) }>{ props.children }</main>\r\n            </Container>\r\n\r\n            { orientation === 'landscape' ? null : <AppMenuNavigation /> }\r\n        </>\r\n    );\r\n};\r\n\r\nexport default MainLayout;\r\n","import { Typography } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport React, { FunctionComponent } from 'react';\nimport { Link } from 'react-router-dom';\nimport MainLayout from '../components/MainLayout';\n\nconst NotFound: FunctionComponent = () => {\n    return (\n        <MainLayout>\n            <Typography variant={ 'h1' } align={ 'center' }>404?!</Typography>\n            <Button component={ Link } to={ '/' } variant=\"outlined\" color=\"primary\" fullWidth>\n                Вернуться на главную\n            </Button>\n        </MainLayout>\n    );\n};\n\nexport default NotFound;\n","import { createMuiTheme, CssBaseline } from '@material-ui/core';\r\nimport red from '@material-ui/core/colors/red';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport React, { FunctionComponent } from 'react';\r\nimport { Route, Router, Switch } from 'react-router-dom';\r\nimport history from '../history';\r\nimport NotFound from '../pages/NotFound';\r\nimport { routes } from '../routes';\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        type: 'dark',\r\n        secondary: red,\r\n        primary: {\r\n            main: '#FFB74D',\r\n            light: 'rgb(255, 197, 112)',\r\n            dark: 'rgb(200, 147, 89)',\r\n            contrastText: 'rgba(0, 0, 0, 0.87)',\r\n        },\r\n        error: {\r\n            main: red.A400,\r\n        },\r\n    },\r\n});\r\n\r\nconst App: FunctionComponent = () => (\r\n    <ThemeProvider theme={ theme }>\r\n        <CssBaseline />\r\n        <Router history={ history }>\r\n            <Switch>\r\n                { Object.values(routes).map((route: any) => <Route key={ route.path } { ...route } />) }\r\n                <Route component={ NotFound } />\r\n            </Switch>\r\n        </Router>\r\n    </ThemeProvider>\r\n);\r\n\r\nexport default App;\r\n","import { combineReducers } from '@reduxjs/toolkit';\r\nimport names from '../features/names/namesSlice';\r\nimport players from '../features/players/playersSlice';\r\n\r\nconst rootReducer = combineReducers({\r\n    players,\r\n    names\r\n});\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>\r\n\r\nexport default rootReducer;\r\n","import { Action, configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\r\nimport { FLUSH, PAUSE, PERSIST, persistReducer, persistStore, PURGE, REGISTER, REHYDRATE } from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport rootReducer, { RootState } from './rootReducer';\r\n\r\nconst persistConfig = {\r\n    key: 'root',\r\n    version: 2,\r\n    storage,\r\n};\r\n\r\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\r\n\r\nconst store = configureStore({\r\n    reducer: persistedReducer,\r\n    middleware: getDefaultMiddleware({\r\n        serializableCheck: {\r\n            ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n        },\r\n    }),\r\n});\r\n\r\nexport type AppDispatch = typeof store.dispatch\r\nexport type AppThunk = ThunkAction<void, RootState, null, Action<string>>\r\n\r\nexport const persistor = persistStore(store);\r\nexport default store;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { StylesProvider } from '@material-ui/core/styles';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport App from './app/App';\nimport store, { persistor } from './app/store';\nimport './index.css';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nReactDOM.render(\n    <Provider store={ store }>\n        <PersistGate loading={ null } persistor={ persistor }>\n            <StylesProvider injectFirst>\n                <App />\n            </StylesProvider>\n        </PersistGate>\n    </Provider>,\n    document.getElementById('root'),\n);\n\nserviceWorkerRegistration.register();\n"],"sourceRoot":""}